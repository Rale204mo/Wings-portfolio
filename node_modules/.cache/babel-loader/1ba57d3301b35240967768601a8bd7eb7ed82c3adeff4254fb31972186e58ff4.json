{"ast":null,"code":"import _objectSpread from\"C:/Users/DEll/Videos/wings/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from'react';import{getStock,getProducts,updateStock,addStock}from'../../Db';import'./Stock.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Stock(){const[stock,setStock]=useState([]);const[products,setProducts]=useState([]);const[form,setForm]=useState({productId:'',quantity:0});const fetchAll=async()=>{setStock((await getStock()).data);setProducts((await getProducts()).data);};useEffect(()=>{fetchAll();},[]);const handleUpdate=async(id,qty)=>{await updateStock(id,_objectSpread(_objectSpread({},stock.find(s=>s.id===id)),{},{quantity:qty}));fetchAll();};const handleAdd=async e=>{e.preventDefault();await addStock({productId:Number(form.productId),quantity:Number(form.quantity)});setForm({productId:'',quantity:0});fetchAll();};return/*#__PURE__*/_jsxs(\"div\",{className:\"stock-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Stock\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"stock-form\",onSubmit:handleAdd,children:[/*#__PURE__*/_jsxs(\"select\",{value:form.productId,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{productId:e.target.value})),required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select product\"}),products.map(p=>/*#__PURE__*/_jsx(\"option\",{value:p.id,children:p.name},p.id))]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:form.quantity,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{quantity:e.target.value})),placeholder:\"Quantity\",required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Add Stock\"})]}),/*#__PURE__*/_jsxs(\"table\",{className:\"stock-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Product\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Quantity\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:stock.map(s=>{const prod=products.find(p=>p.id===s.productId)||{};return/*#__PURE__*/_jsxs(\"tr\",{className:s.quantity<=5?'low-stock':'',children:[/*#__PURE__*/_jsx(\"td\",{children:prod.name||'Product '+s.productId}),/*#__PURE__*/_jsx(\"td\",{children:s.quantity}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleUpdate(s.id,s.quantity+1),children:\"+1\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleUpdate(s.id,Math.max(0,s.quantity-1)),children:\"-1\"})]})]},s.id);})})]})]});}","map":{"version":3,"names":["React","useEffect","useState","getStock","getProducts","updateStock","addStock","jsx","_jsx","jsxs","_jsxs","Stock","stock","setStock","products","setProducts","form","setForm","productId","quantity","fetchAll","data","handleUpdate","id","qty","_objectSpread","find","s","handleAdd","e","preventDefault","Number","className","children","onSubmit","value","onChange","target","required","map","p","name","type","placeholder","prod","onClick","Math","max"],"sources":["C:/Users/DEll/Videos/wings/src/components/Stock/Stock.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { getStock, getProducts, updateStock, addStock } from '../../Db';\nimport './Stock.css';\n\nexport default function Stock(){\n  const [stock, setStock] = useState([]);\n  const [products, setProducts] = useState([]);\n  const [form, setForm] = useState({productId:'', quantity:0});\n\n  const fetchAll = async ()=>{\n    setStock((await getStock()).data);\n    setProducts((await getProducts()).data);\n  };\n\n  useEffect(()=>{ fetchAll(); }, []);\n\n  const handleUpdate = async (id, qty)=>{\n    await updateStock(id, { ...stock.find(s=>s.id===id), quantity: qty });\n    fetchAll();\n  };\n\n  const handleAdd = async (e)=>{\n    e.preventDefault();\n    await addStock({ productId: Number(form.productId), quantity: Number(form.quantity) });\n    setForm({productId:'', quantity:0});\n    fetchAll();\n  };\n\n  return (\n    <div className=\"stock-container\">\n      <h2>Stock</h2>\n\n      <form className=\"stock-form\" onSubmit={handleAdd}>\n        <select value={form.productId} onChange={e=>setForm({...form, productId:e.target.value})} required>\n          <option value=\"\">Select product</option>\n          {products.map(p=> <option key={p.id} value={p.id}>{p.name}</option>)}\n        </select>\n        <input type=\"number\" value={form.quantity} onChange={e=>setForm({...form, quantity:e.target.value})} placeholder=\"Quantity\" required />\n        <button type=\"submit\">Add Stock</button>\n      </form>\n\n      <table className=\"stock-table\">\n        <thead><tr><th>Product</th><th>Quantity</th><th>Actions</th></tr></thead>\n        <tbody>\n          {stock.map(s=>{\n            const prod = products.find(p=>p.id===s.productId) || {};\n            return (\n              <tr key={s.id} className={s.quantity <=5 ? 'low-stock' : ''}>\n                <td>{prod.name || ('Product '+s.productId)}</td>\n                <td>{s.quantity}</td>\n                <td>\n                  <button onClick={()=>handleUpdate(s.id, s.quantity+1)}>+1</button>\n                  <button onClick={()=>handleUpdate(s.id, Math.max(0, s.quantity-1))}>-1</button>\n                </td>\n              </tr>\n            );\n          })}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}